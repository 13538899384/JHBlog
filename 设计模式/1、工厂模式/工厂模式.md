 ## 工厂模式
 工厂模式就是定义创建对象的接口，让子类决定实例化哪一个类。这样，类的实例化就推迟到了子类
 
 大白话就是把一个大的模块，切成一个一个小的部件，然后组装成我们需要的模块
 
 ### 为啥要使用工厂模式

 在开始之前我们先讲一个故事
 
 “话说三国时期，曹操带领百万大军攻打东吴，大军在长江赤壁驻扎，军船连成一片，眼看就要灭掉东吴，统一天下，曹操大悦，于是大宴众文武，在酒席间，曹操诗性大发，不觉吟道：‘喝酒唱歌，人生真爽。……’。众文武齐呼：‘丞相好诗！’于是一臣子速命印刷工匠刻版印刷，以便流传天下。”
 
 “样张出来给曹操一看，曹操感觉不妥，说道：‘喝与唱，此话过俗，应改为‘对酒当歌’较好！’，于是此臣就命工匠重新来过。工匠眼看连夜刻版之工，彻底白费，心中叫苦不迭。只得照办。”
 ![1](https://github.com/SunshineBrother/JHBlog/blob/master/设计模式/1、工厂模式/1.png)
 “样张再次出来请曹操过目，曹操细细一品，觉得还是不好，说：‘人生真爽太过直接，应改问语才够意境，因此应改为‘对酒当歌，人生几何？……’当臣转告工匠之时，工匠晕倒……！”
 
  ![2](https://github.com/SunshineBrother/JHBlog/blob/master/设计模式/1、工厂模式/2.png)
 
 如果使用活字印刷术就可以，则只需要更改4个字就可以了
  
![3](https://github.com/SunshineBrother/JHBlog/blob/master/设计模式/1、工厂模式/3.png)
 
 ### 案例
 我们大概了解了什么是工厂模式，那么我们就要该在项目中运用一下了。
 我们常见的UITableView列表包含了各种不同的UI展示的Cell。我们在其相关的代理方法实现可能是这样的：
 
 ```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 
 if (indexPath.row == 0) {
 
 oneBaseCell *cell = [tableView dequeueReusableCellWithIdentifier:@"oneBaseCell"]];
 [cell configUI];  //不同样式的Cell所展示的UI各不相同，由于是Demo样例，这里并未配置相关数据源
 return cell;
 }else if (indexPath.row == 1) {
 
 TwoBaseCell *cell = [tableView dequeueReusableCellWithIdentifier:@"TwoBaseCell"]];
 [cell configUI];
 return cell;
 }else if (indexPath.row == 2) {
 
 ThreeBaseCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ThreeBaseCell"]];
 [cell configUI];
 return cell;
 }
 }
 
 
 ```
 
 随着需求的迭代，我们后期可能会增加更多样式的`Cell`，此时我们就需要变更这部分的代码。增加与之对应的`else if`条件判断，代码将变得越来越长。同时，在更加复杂的场景下，我们并不能保证调整原有代码以后，之前功能不受影响。我们将投入更多的时间进行原有代码功能的回归，这是我们不希望发生的。
 
 
 1.将各种展示功能相似的Cell抽象为`BaseCell`(继承于UITableViewCell)，`BaseCell`提供默认展示UI的方法`configUI`
 2.其他多种的Cell根据其特定的需求对`configUI`方法进覆写 
 
 这时我们的代理方法就变成了这些
 ```
 func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
 let cell = BaseCell().configUI(model: self.dataArr[indexPath.row], tableView: tableView, indexPath: indexPath)
 return cell
 }
 ```
 我们在BaseCell这个工厂里面写各种需求
 ```
 func configUI(model: Model, tableView: UITableView, indexPath: IndexPath) -> UITableViewCell {
 print(model.reuseId)
 let cell = tableView.dequeueReusableCell(withIdentifier: model.reuseId!, for: indexPath)
 if model.reuseId == "OneBaseCell" {
 (cell as! OneBaseCell).configCell(model)
 }else if model.reuseId == "TwoBaseCell" {
 (cell as! TwoBaseCell).configCell(model)
 }else{
 (cell as! ThreeBaseCell).configCell(model)
 }
 
 return cell
 }
 ```
 
 
 [参考demo](https://github.com/SunshineBrother/JHBlog/tree/master/设计模式/1、工厂模式)
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
